(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/goods"],{5498:function(t,a,e){"use strict";(function(t,e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={data:function(){return{style:0,searchInfo:"",inputValue:"",showClearIcon:!1,tabIndex:"",filterIndex:0,tabList:["分享","商城"],shareTag:[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}],filter:["品牌","分类"],filterTag_Index:"",filter_alert:!0,shareList:[],filterCoverList:{list:["铁三角","索尼","铁三角","索尼","铁三角"],sum:4999},classList:[],filterArr:[],goodList:[],byid:!1,captionList:[{title:"品牌",arr:[]},{title:"分类",arr:[]},{title:"促销",arr:[]}],selectArr:[],brand_id:"",category_id:"",goodsFormData:{category_id:"",search:"",sortType:"all",sortPrice:"",listRows:"",brand_id:"",promotions_type:"",min_price:"",max_price:""},shareFormData:{search:"",tags_id:""}}},watch:{tabIndex:function(t,a){if(""!==a){if(this.filterIndex=0,0===t)return this.getCultureTag(),void this.searchAction();if(1===t)return this.shareTag=[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}],void this.searchAction()}},filterIndex:function(t,a){4===t&&(this.filter_alert=!0)},inputValue:function(t,a){this.shareFormData.search=t,this.goodsFormData.search=t}},computed:{statusBarHeight:function(){return this.$store.state.statusBarHeight}},onLoad:function(a){console.log(t("分享文章详情页接受到的参数",a," at pages\\components\\goods.vue:211")),a.class&&(console.log(t("class",a.class," at pages\\components\\goods.vue:213")),this.searchInfo=a.class,this.tabIndex=Number(a.type),this.goodsFormData.search=this.searchInfo,0===this.tabIndex&&this.getCultureTag()),a.id&&(console.log(t("id",a.id,a.name," at pages\\components\\goods.vue:223")),this.category_id=a.id,this.tabIndex=1,this.byid=!0),this.searchAction(),this.getClassList()},methods:{getCultureTag:function(){var a=this;this.$http({url:this.$api.activitytags,cb:function(e,o){console.log(t(o.data.tags[0].tag_id," at pages\\components\\goods.vue:240")),a.shareTag=o.data.tags,a.shareFormData.tags_id=o.data.tags[0].tag_id.toString()}})},searchAction:function(){var t=this,a=t.$api.goodlists,o=t.goodsFormData;0===t.tabIndex&&(a=t.$api.articlesbysearch,o=t.shareFormData),t.byid||1!==t.tabIndex||(a=t.$api.goodlists),t.$http({url:a,data:o,cb:function(a,o){if(a||1!==o.code)e.showToast({title:"搜索失败",icon:"none"});else switch(0===o.data.list.length&&e.showToast({title:"未搜索到相关数据",icon:"none"}),t.tabIndex){case 0:t.shareList=o.data.list;break;case 1:t.goodList=o.data.list.data,t.filterCoverList.sum=o.data.list.total;break}}})},changeStyle:function(){0!==this.style?this.style=0:this.style=1},goBack:function(){e.navigateBack({delta:1})},clearIcon:function(){this.inputValue="",this.showClearIcon=!1},goShareDetail:function(t){e.navigateTo({url:"../components/shareInfo?article_id="+t})},clearInput:function(t){t.target.value.length>0?this.showClearIcon=!0:this.showClearIcon=!1},selectClass:function(t){var a=this;"0"===a.filterTag_Index?a.goodsFormData.brand_id=a.goodsFormData.brand_id&&a.goodsFormData.brand_id===t.category_id?"":t.category_id:"1"===a.filterTag_Index&&(a.goodsFormData.category_id=a.goodsFormData.category_id&&a.goodsFormData.category_id===t.category_id?"":t.category_id),this.searchAction()},resetSearch:function(){var t=this;t.goodsFormData.category_id="",t.goodsFormData.brand_id="",t.goodsFormData.promotions_type="",t.filterTag_Index="",t.filter_alert=!1,t.selectArr=[],this.searchAction()},selectTab:function(t){this.tabIndex=t},selectFilter:function(a){var e=this;if(e.filterIndex=a,0===e.tabIndex)return console.log(t("进来了",e.shareTag[a].tag_id," at pages\\components\\goods.vue:353")),e.shareFormData.tags_id=e.shareTag[a].tag_id,void e.searchAction();if(1!==e.tabIndex);else switch(a){case 0:e.goodsFormData.sortType="all",e.searchAction();break;case 1:e.goodsFormData.sortType="sales",e.searchAction();break;case 2:e.goodsFormData.sortType="shelves",e.searchAction();break;case 3:e.goodsFormData.sortType="price",e.goodsFormData.sortPrice=!e.goodsFormData.sortPrice,e.searchAction();break;case 4:e.$http({url:e.$api.promotions,cb:function(t,a){e.classList.push(a.data.promotions),e.captionList[2].arr=a.data.promotions,e.goodsFormData.brand_id&&e.selectArr.push(0),e.goodsFormData.category_id&&e.selectArr.push(1),e.goodsFormData.promotions_type&&e.selectArr.push(2)}}),e.filter_alert=!0;break}},getClassList:function(){var a=this,e={},o=a.$api.getbrands,s=a.$api.goodscategory;a.byid&&(e={category_id:this.category_id},o=a.$api.getbrandsbycategoryid,s=a.$api.goodscategorybysecond),a.$http({url:o,data:e,cb:function(o,i){a.classList.push(i.data.list),a.captionList[0].arr=i.data.list,a.$http({url:s,data:e,cb:function(e,o){console.log(t(o.data.list," at pages\\components\\goods.vue:428")),a.captionList[1].arr=o.data.list,a.classList.push(o.data.list)}})}})},selectFilterTag:function(t){var a=t.toString();this.filterCoverList.list=this.classList[a],a!==this.filterTag_Index||""===this.filterTag_Index?a===this.filterTag_Index&&""!==this.filterTag_Index||(this.filterTag_Index=a):this.filterTag_Index=""},setCategory:function(a){if(-1===this.selectArr.indexOf(a))return this.selectArr.push(a),void console.log(t(this.selectArr," at pages\\components\\goods.vue:453"));this.selectArr.splice(this.selectArr.indexOf(a),1)},selTag:function(a,e,o){var s=this;console.log(t("选择了",a,e,o," at pages\\components\\goods.vue:462")),0===a?s.goodsFormData.brand_id=o.category_id===s.goodsFormData.brand_id&&s.goodsFormData.brand_id?"":o.category_id:1===a?s.goodsFormData.category_id=o.category_id===s.goodsFormData.category_id&&s.goodsFormData.category_id?"":o.category_id:2===a&&(s.goodsFormData.promotions_type=o.type===s.goodsFormData.promotions_type&&s.goodsFormData.promotions_type?"":o.type),this.searchAction()},sureSearch:function(){this.searchAction(),this.filter_alert=!1},clickZan:function(a,o){var s=this;console.log(t(a.article_id,a.islike,o," at pages\\components\\goods.vue:477"));var i=this.$api.unLike;"no"===a.islike&&(i=this.$api.like),this.$http({url:i,data:{article_id:a.article_id},cb:function(t,a){if(!t&&a)switch(s.shareList[o].islike){case"yes":e.showToast({title:"取消点赞成功",icon:"none"}),s.shareList[o].islike="no",s.shareList[o].like_count-=1;break;case"no":e.showToast({title:"点赞成功",icon:"none"}),s.shareList[o].islike="yes",s.shareList[o].like_count+=1;break}else switch(s.shareList[o].islike){case"yes":e.showToast({title:"取消点赞失败",icon:"none"});break;case"no":e.showToast({title:"点赞失败请重试",icon:"none"});break}}})},goDetail:function(a){console.log(t("接收到信息",a.goods_id," at pages\\components\\goods.vue:527")),e.navigateTo({url:"../components/goodDetail?goods_id="+a.goods_id})}}};a.default=o}).call(this,e("0de9")["default"],e("6e42")["default"])},5586:function(t,a,e){"use strict";e.r(a);var o=e("d739"),s=e("a57b");for(var i in s)"default"!==i&&function(t){e.d(a,t,function(){return s[t]})}(i);e("e432");var r=e("2877"),n=Object(r["a"])(s["default"],o["a"],o["b"],!1,null,"089ecd2a",null);a["default"]=n.exports},"9c19":function(t,a,e){},a57b:function(t,a,e){"use strict";e.r(a);var o=e("5498"),s=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(a,t,function(){return o[t]})}(i);a["default"]=s.a},d739:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=(t._self._c,t.__map(t.filter,function(a,e){var o=e.toString(),s=e.toString();return{$orig:t.__get_orig(a),g0:o,g1:s}})),o=t.__map(t.captionList,function(a,e){var o=t.selectArr.indexOf(e),s=t.selectArr.indexOf(e);return{$orig:t.__get_orig(a),g2:o,g3:s}});t._isMounted||(t.e0=function(a){t.filterTag_Index=""},t.e1=function(a){t.filterTag_Index=""},t.e2=function(a){t.filter_alert=!1}),t.$mp.data=Object.assign({},{$root:{l0:e,l1:o}})},s=[];e.d(a,"a",function(){return o}),e.d(a,"b",function(){return s})},e432:function(t,a,e){"use strict";var o=e("9c19"),s=e.n(o);s.a}},[["c267","common/runtime","common/vendor"]]]);