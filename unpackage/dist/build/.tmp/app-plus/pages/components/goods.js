(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/goods"],{"36d1":function(t,a,o){},"3ff3":function(t,a,o){"use strict";var e=o("36d1"),s=o.n(e);s.a},5498:function(t,a,o){"use strict";(function(t,o){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{style:0,searchInfo:"",inputValue:"",showClearIcon:!1,tabIndex:"",filterIndex:0,tabList:["分享","商城"],shareTag:[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}],filter:["品牌","分类"],filterTag_Index:"",filter_alert:!0,scrollTop:0,shareList:[],filterCoverList:{list:[],sum:0},classList:[],filterArr:[],goodList:[],byid:!1,captionList:[{title:"品牌",arr:[]},{title:"分类",arr:[]},{title:"促销",arr:[]}],selectArr:[],brand_id:"",category_id:"",goodsFormData:{page:1,category_id:"",search:"",sortType:"all",sortPrice:"",listRows:"",brand_id:"",promotions_type:"",min_price:"",max_price:""},shareFormData:{search:"",tags_id:""}}},watch:{tabIndex:function(t,a){if(""!==a){if(this.filterIndex=0,0===t)return this.getCultureTag(),void this.searchAction();if(1===t)return this.shareTag=[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}],void this.searchAction()}},filterIndex:function(t,a){4===t&&(this.filter_alert=!0)},inputValue:function(t,a){this.shareFormData.search=t,this.goodsFormData.search=t,this.goodsFormData.page=1}},computed:{statusBarHeight:function(){return this.$store.state.statusBarHeight}},onLoad:function(a){console.log(t("分享文章详情页接受到的参数",a," at pages\\components\\goods.vue:215")),a.class&&(console.log(t("class",a.class," at pages\\components\\goods.vue:217")),this.searchInfo=a.class,this.tabIndex=Number(a.type),this.goodsFormData.search=this.searchInfo,0===this.tabIndex&&this.getCultureTag()),a.id&&(console.log(t("id",a.id,a.name," at pages\\components\\goods.vue:227")),this.goodsFormData.category_id=a.id,this.category_id=a.id,this.tabIndex=1,this.byid=!0),this.searchAction(),this.getClassList()},methods:{getCultureTag:function(){var a=this;this.$http({url:this.$api.activitytags,cb:function(o,e){console.log(t(e.data.tags[0].tag_id," at pages\\components\\goods.vue:245")),a.shareTag=e.data.tags,a.shareFormData.tags_id=e.data.tags[0].tag_id.toString()}})},loadingMore:function(){var t=this;t.goodsFormData.page+=1,t.searchAction()},searchAction:function(){var t=this,a=t.$api.goodlists,e=t.goodsFormData;0===t.tabIndex&&(a=t.$api.articlesbysearch,e=t.shareFormData),t.byid||1!==t.tabIndex||(a=t.$api.goodlists),t.$http({url:a,data:e,cb:function(a,e){if(a||1!==e.code)o.showToast({title:"搜索失败",icon:"none"});else switch(0===e.data.list.length&&o.showToast({title:"未搜索到相关数据",icon:"none"}),t.tabIndex){case 0:t.shareList=e.data.list;break;case 1:t.goodsFormData.page>1&&t.goodsFormData.page<=e.data.list.last_page?e.data.list.data.map(function(a,o){t.goodList.push(a)}):1===t.goodsFormData.page&&(t.goodList=e.data.list.data),t.filterCoverList.sum=e.data.list.total;break}}})},changeStyle:function(){0!==this.style?this.style=0:this.style=1},goBack:function(){o.navigateBack({delta:1})},clearIcon:function(){this.inputValue="",this.showClearIcon=!1},goShareDetail:function(t){o.navigateTo({url:"../components/shareInfo?article_id="+t})},clearInput:function(t){t.target.value.length>0?this.showClearIcon=!0:this.showClearIcon=!1},selectClass:function(t){var a=this;"0"===a.filterTag_Index?a.goodsFormData.brand_id=a.goodsFormData.brand_id&&a.goodsFormData.brand_id===t.category_id?"":t.category_id:"1"===a.filterTag_Index&&(a.goodsFormData.category_id=a.goodsFormData.category_id&&a.goodsFormData.category_id===t.category_id?"":t.category_id),this.searchAction()},resetSearch:function(){var t=this;t.goodsFormData.category_id="",t.goodsFormData.brand_id="",t.goodsFormData.promotions_type="",t.goodsFormData.page=1,t.filterTag_Index="",t.filter_alert=!1,t.selectArr=[],this.searchAction()},selectTab:function(t){this.tabIndex=t},selectFilter:function(a){var o=this;if(o.goodsFormData.page=1,o.scrollTop=0,o.filterIndex=a,0===o.tabIndex)return console.log(t("进来了",o.shareTag[a].tag_id," at pages\\components\\goods.vue:373")),o.shareFormData.tags_id=o.shareTag[a].tag_id,void o.searchAction();if(1!==o.tabIndex);else switch(a){case 0:o.goodsFormData.sortType="all",o.searchAction();break;case 1:o.goodsFormData.sortType="sales",o.searchAction();break;case 2:o.goodsFormData.sortType="shelves",o.searchAction();break;case 3:o.goodsFormData.sortType="price",o.goodsFormData.sortPrice=!o.goodsFormData.sortPrice,o.searchAction();break;case 4:o.$http({url:o.$api.promotions,cb:function(t,a){o.classList.push(a.data.promotions),o.captionList[2].arr=a.data.promotions,o.goodsFormData.brand_id&&o.selectArr.push(0),o.goodsFormData.category_id&&o.selectArr.push(1),o.goodsFormData.promotions_type&&o.selectArr.push(2)}}),o.filter_alert=!0;break}},getClassList:function(){var a=this,o={},e=a.$api.getbrands,s=a.$api.goodscategory;a.byid&&(o={category_id:this.category_id},e=a.$api.getbrandsbycategoryid,s=a.$api.goodscategorybysecond),a.$http({url:e,data:o,cb:function(e,i){a.classList.push(i.data.list),a.captionList[0].arr=i.data.list,a.$http({url:s,data:o,cb:function(o,e){console.log(t(e.data.list," at pages\\components\\goods.vue:448")),a.captionList[1].arr=e.data.list,a.classList.push(e.data.list)}})}})},selectFilterTag:function(t){var a=this,o=t.toString();a.goodsFormData.page=1,a.scrollTop=0,a.filterCoverList.list=a.classList[o],o!==a.filterTag_Index||""===a.filterTag_Index?o===a.filterTag_Index&&""!==a.filterTag_Index||(a.filterTag_Index=o):a.filterTag_Index=""},setCategory:function(a){if(-1===this.selectArr.indexOf(a))return this.selectArr.push(a),void console.log(t(this.selectArr," at pages\\components\\goods.vue:476"));this.selectArr.splice(this.selectArr.indexOf(a),1)},selTag:function(a,o,e){var s=this;console.log(t("选择了",a,o,e," at pages\\components\\goods.vue:485")),0===a?s.goodsFormData.brand_id=e.category_id===s.goodsFormData.brand_id&&s.goodsFormData.brand_id?"":e.category_id:1===a?s.goodsFormData.category_id=e.category_id===s.goodsFormData.category_id&&s.goodsFormData.category_id?"":e.category_id:2===a&&(s.goodsFormData.promotions_type=e.type===s.goodsFormData.promotions_type&&s.goodsFormData.promotions_type?"":e.type),this.searchAction()},sureSearch:function(){this.searchAction(),this.filter_alert=!1},clickZan:function(a,e){var s=this;console.log(t(a.article_id,a.islike,e," at pages\\components\\goods.vue:500"));var i=this.$api.unLike;"no"===a.islike&&(i=this.$api.like),this.$http({url:i,data:{article_id:a.article_id},cb:function(t,a){if(!t&&a)switch(s.shareList[e].islike){case"yes":o.showToast({title:"取消点赞成功",icon:"none"}),s.shareList[e].islike="no",s.shareList[e].like_count-=1;break;case"no":o.showToast({title:"点赞成功",icon:"none"}),s.shareList[e].islike="yes",s.shareList[e].like_count+=1;break}else switch(s.shareList[e].islike){case"yes":o.showToast({title:"取消点赞失败",icon:"none"});break;case"no":o.showToast({title:"点赞失败请重试",icon:"none"});break}}})},goDetail:function(a){console.log(t("接收到信息",a.goods_id," at pages\\components\\goods.vue:550")),o.navigateTo({url:"../components/goodDetail?goods_id="+a.goods_id})}}};a.default=e}).call(this,o("0de9")["default"],o("6e42")["default"])},5586:function(t,a,o){"use strict";o.r(a);var e=o("7940"),s=o("a57b");for(var i in s)"default"!==i&&function(t){o.d(a,t,function(){return s[t]})}(i);o("3ff3");var r=o("2877"),n=Object(r["a"])(s["default"],e["a"],e["b"],!1,null,"69732c7b",null);a["default"]=n.exports},7940:function(t,a,o){"use strict";var e=function(){var t=this,a=t.$createElement,o=(t._self._c,t.__map(t.filter,function(a,o){var e=o.toString(),s=o.toString();return{$orig:t.__get_orig(a),g0:e,g1:s}})),e=t.__map(t.captionList,function(a,o){var e=t.selectArr.indexOf(o),s=t.selectArr.indexOf(o);return{$orig:t.__get_orig(a),g2:e,g3:s}});t._isMounted||(t.e0=function(a){t.filterTag_Index=""},t.e1=function(a){t.filterTag_Index=""},t.e2=function(a){t.filter_alert=!1}),t.$mp.data=Object.assign({},{$root:{l0:o,l1:e}})},s=[];o.d(a,"a",function(){return e}),o.d(a,"b",function(){return s})},a57b:function(t,a,o){"use strict";o.r(a);var e=o("5498"),s=o.n(e);for(var i in e)"default"!==i&&function(t){o.d(a,t,function(){return e[t]})}(i);a["default"]=s.a}},[["c267","common/runtime","common/vendor"]]]);