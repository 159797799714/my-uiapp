(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/components/goods"],{"0b7e":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{style:0,searchInfo:"",inputValue:"",showClearIcon:!1,tabIndex:0,filterIndex:0,tabList:["分享","商城"],shareTag:[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}],filter:["品牌","分类"],filterTag_Index:"",filter_alert:!0,shareList:[],filterCoverList:{list:["铁三角","索尼","铁三角","索尼","铁三角"],sum:4999},filterArr:[],goodList:[],captionList:[{title:"品牌",selectIndexArr:[],arr:[]},{title:"分类",selectIndexArr:[],arr:[]},{title:"促销",selectIndexArr:[],arr:[]}],selectArr:[],goodsFormData:{category_id:"",search:"",sortType:"",sortPrice:"",listRows:"",brand_id:"",promotions_type:"",min_price:"",max_price:""},shareFormData:{category_id:"",search:"",tags_id:""},byid:!1}},watch:{tabIndex:function(t,e){this.filterIndex=0,this.searchAction(),0!==t?1!==t||(this.shareTag=[{tag_name:"综合"},{tag_name:"销量"},{tag_name:"上架"},{tag_name:"价格"},{tag_name:"筛选"}]):this.getCultureTag()},filterIndex:function(t,e){4===t&&(this.filter_alert=!0)},inputValue:function(t,e){0===this.tabIndex?this.shareFormData.search=t:this.goodsFormData.search=t}},onLoad:function(t){console.log("分享文章详情页接受到的参数",t," at pages\\components\\goods.vue:209"),t.class&&(console.log("class",t.class," at pages\\components\\goods.vue:211"),this.searchInfo=t.class,this.tabIndex=Number(t.type),this.goodsFormData.search=this.searchInfo,0===this.tabIndex&&this.getCultureTag()),t.id&&(console.log("id",t.id," at pages\\components\\goods.vue:221"),this.shareFormData.category_id=t.id,this.goodsFormData.category_id=t.id,this.byid=!0),this.searchAction()},methods:{getCultureTag:function(){var t=this;this.$http({url:this.$api.activitytags,cb:function(e,i){t.shareTag=i.data.tags}})},searchAction:function(){var e=this,i=this.$api.goodlists,s=this.goodsFormData;0===this.tabIndex&&(i=this.$api.articlesbysearch,this.byid&&""===this.inputValue&&(i=this.$api.articlesbycategoryid),s=this.shareFormData),console.log("url",i,"data",s,"byid",this.byid," at pages\\components\\goods.vue:253"),this.$http({url:i,data:s,cb:function(i,s){if(i||1!==s.code)t.showToast({title:"搜索失败",icon:"none"});else{if(0===s.data.list.length)return void t.showToast({title:"未搜索到相关数据",icon:"none"});switch(e.tabIndex){case 0:e.shareList=s.data.list;break;case 1:e.goodList=s.data.list.data;break}}}})},changeStyle:function(){0!==this.style?this.style=0:this.style=1},goBack:function(){t.navigateBack({delta:1})},clearIcon:function(){this.inputValue="",this.showClearIcon=!1},goShareDetail:function(e){t.navigateTo({url:"../components/shareInfo?article_id="+e})},clearInput:function(t){t.target.value.length>0?this.showClearIcon=!0:this.showClearIcon=!1},selectTab:function(t){this.tabIndex=t},selectFilter:function(t){var e=this;if(this.filterIndex=t,0!==this.tabIndex)if(1!==this.tabIndex);else switch(t){case 0:this.goodsFormData.sortType="",this.searchAction();break;case 1:this.goodsFormData.sortType="sales",this.searchAction();break;case 2:this.goodsFormData.sortType="price",this.searchAction();break;case 3:this.goodsFormData.sortPrice=!this.goodsFormData.sortPrice,this.searchAction();break;case 4:this.$http({url:this.$api.getbrands,cb:function(t,i){var s=[],a=i.data.list;for(var o in a)s.push(a[o]);e.captionList[0].arr=s}}),this.$http({url:this.$api.goodscategory,cb:function(t,i){console.log(i.data.list," at pages\\components\\goods.vue:364"),e.captionList[1].arr=i.data.list}}),this.$http({url:this.$api.promotions,cb:function(t,i){e.captionList[2].arr=i.data.promotions}}),this.filter_alert=!0;break}else console.log("进来了"," at pages\\components\\goods.vue:325")},selectFilterTag:function(t){var e=t.toString();e!==this.filterTag_Index||""===this.filterTag_Index?e===this.filterTag_Index&&""!==this.filterTag_Index||(this.filterTag_Index=e):this.filterTag_Index=""},setCategory:function(t){-1!==this.selectArr.indexOf(t)?this.selectArr.splice(this.selectArr.indexOf(t),1):this.selectArr.push(t)},selTag:function(t,e){console.log("选择了",t,e," at pages\\components\\goods.vue:403");var i=this.captionList[t].arr[e],s=this.captionList[t].selectIndexArr.indexOf(i);if(this.captionList[t].selectIndexArr.length<1)this.captionList[t].selectIndexArr.push(i);else if(1===this.captionList[t].selectIndexArr.length){if(-1===s)return void(this.captionList[t].selectIndexArr=[i]);this.captionList[t].selectIndexArr=[]}},resetFilter:function(){this.captionList.map(function(t,e){t.selectIndexArr=["默认"]})},clickZan:function(e,i){var s=this;console.log(e.article_id,e.islike,i," at pages\\components\\goods.vue:438");var a=this.$api.unLike;"no"===e.islike&&(a=this.$api.like),this.$http({url:a,data:{article_id:e.article_id},cb:function(e,a){if(!e&&a)switch(s.shareList[i].islike){case"yes":t.showToast({title:"取消点赞成功",icon:"none"}),s.shareList[i].islike="no",s.shareList[i].like_count-=1;break;case"no":t.showToast({title:"点赞成功",icon:"none"}),s.shareList[i].islike="yes",s.shareList[i].like_count+=1;break}else switch(s.shareList[i].islike){case"yes":t.showToast({title:"取消点赞失败",icon:"none"});break;case"no":t.showToast({title:"点赞失败请重试",icon:"none"});break}}})},goDetail:function(e){t.navigateTo({url:"../components/goodDetail?info="+e.name})}}};e.default=i}).call(this,i("6e42")["default"])},3558:function(t,e,i){"use strict";var s=i("56d1"),a=i.n(s);a.a},"455a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.filter,function(e,i){var s=i.toString(),a=i.toString();return{$orig:t.__get_orig(e),g0:s,g1:a}})),s=t.__map(t.captionList,function(e,i){var s=t.selectArr.indexOf(i),a=t.selectArr.indexOf(i),o=t.__map(e.arr,function(i,s){var a=e.selectIndexArr.indexOf(i);return{$orig:t.__get_orig(i),g4:a}});return{$orig:t.__get_orig(e),g2:s,g3:a,l1:o}});t._isMounted||(t.e0=function(e){t.filterTag_Index=""},t.e1=function(e){t.filter_alert=!1}),t.$mp.data=Object.assign({},{$root:{l0:i,l2:s}})},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"56d1":function(t,e,i){},b48c:function(t,e,i){"use strict";i.r(e);var s=i("455a"),a=i("d129");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("3558");var n=i("2877"),r=Object(n["a"])(a["default"],s["a"],s["b"],!1,null,"79b0834a",null);e["default"]=r.exports},d129:function(t,e,i){"use strict";i.r(e);var s=i("0b7e"),a=i.n(s);for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);e["default"]=a.a}},[["1b6b","common/runtime","common/vendor"]]]);